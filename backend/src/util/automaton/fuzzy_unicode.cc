// Copyright 2023 The Z2K Plus+ Authors
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

#include "z2kplus/backend/util/automaton/fuzzy_unicode.h"

#include <string_view>
#include "kosak/coding/coding.h"

namespace z2kplus::backend::util::automaton {

namespace {
// Credits:
//   Unicode generator: http://qaz.wtf/u/convert.cgi?text=Cinnabon
//   Unicode identifier: http://www.babelstone.co.uk/Unicode/whatisit.html
std::string_view rawExpansions[] = {
  "â“ðŸ…ï½ðšð–†ð’‚ð“ªð•’ðšŠð–ºð—®ð™–ð˜¢â’œðŸ‡¦ðŸ„°ðŸ…°ó ¡Ã¡ï¾‘à¸„Î±Ð°áˆð”žÃ¤á´€Èºâ‚áµƒÉâ’¶ï¼¡ð€ð•¬ð‘¨ð“ð”¸ð™°ð– ð—”ð˜¼ð˜ˆó ÃÐ”ð”„Ã„á´¬Ã ÄÃ£Î¬ÄƒÃ¥à¤µÃ¢",
  "â“‘ðŸ…‘ï½‚ð›ð–‡ð’ƒð“«ð•“ðš‹ð–»ð—¯ð™—ð˜£â’ðŸ‡§ðŸ„±ðŸ…±ó ¢ä¹ƒà¹’Ð²ÑŠáŒŒð”Ÿá¸…Ê™Æ€áµ‡â’·ï¼¢ðð•­ð‘©ð“‘ð”¹ð™±ð–¡ð—•ð˜½ð˜‰ó ‚Ð‘ð”…á¸„Éƒá´®",
  "â“’ðŸ…’ï½ƒðœð–ˆð’„ð“¬ð•”ðšŒð–¼ð—°ð™˜ð˜¤â’žðŸ‡¨ðŸ„²ðŸ…²ó £Ä‡ÆˆÂ¢Ï‚Ñáˆ­ð” Ä‹á´„È¼á¶œÉ”â†„â’¸ï¼£ð‚ð•®ð‘ªð“’â„‚ð™²ð–¢ð—–ð˜¾ð˜Šó ƒÄ†Ò€â„­ÄŠÈ»â†ƒ",
  "â““ðŸ…“ï½„ðð–‰ð’…ð“­ð••ðšð–½ð—±ð™™ð˜¥â’ŸðŸ‡©ðŸ„³ðŸ…³ó ¤É—âˆ‚à¹”â†á‹•ð”¡á¸‹á´…Ä‘áµˆâ’¹ï¼¤ðƒð•¯ð‘«ð““ð”»ð™³ð–£ð——ð˜¿ð˜‹ó „ð”‡á¸ŠÄá´°",
  "â“”ðŸ…”ï½…ðžð–Šð’†ð“®ð•–ðšŽð–¾ð—²ð™šð˜¦â’ ðŸ‡ªðŸ„´ðŸ…´ó ¥Ã©ä¹‡ï»‰Ñ”Ñá‰¿ð”¢Ã«á´‡É‡â‚‘áµ‰ÇÉ˜â’ºï¼¥ð„ð•°ð‘¬ð“”ð”¼ð™´ð–¤ð—˜ð™€ð˜Œó …Ã‰Ð„ð”ˆÐÉ†á´±ÆŽÄ“Ä•Ãªáº½Ä›Ð€â‹·â‹¶ÐµÄ’å·²âˆˆÑ‘",
  "â“•ðŸ…•ï½†ðŸð–‹ð’‡ð“¯ð•—ðšð–¿ð—³ð™›ð˜§â’¡ðŸ‡«ðŸ„µðŸ…µó ¦ï½·à¤¿Æ’Å¦á‰»ð”£á¸Ÿêœ°á¶ ÉŸêŸ»â’»ï¼¦ð…ð•±ð‘­ð“•ð”½ð™µð–¥ð—™ð™ð˜ó †ð”‰á¸ž",
  "â“–ðŸ…–ï½‡ð ð–Œð’ˆð“°ð•˜ðšð—€ð—´ð™œð˜¨â’¢ðŸ‡¬ðŸ„¶ðŸ…¶ó §Çµï»­ï»®Ð‘áŠ—ð”¤Ä¡É¢Ç¥áµÆƒâ’¼ï¼§ð†ð•²ð‘®ð“–ð”¾ð™¶ð–¦ð—šð™‚ð˜Žó ‡Ç´ð”ŠÄ Ç¤á´³",
  "â“—ðŸ…—ï½ˆð¡ð–ð’‰ð“±ð•™ðš‘ð—ð—µð™ð˜©â’£ðŸ‡­ðŸ„·ðŸ…·ó ¨ã‚“É¦Ð½Ñ’Ð‚á‹˜ð”¥á¸§ÊœÄ§â‚•Ê°É¥â’½ï¼¨ð‡ð•³ð‘¯ð“—â„ð™·ð–§ð—›ð™ƒð˜ó ˆÐâ„Œá¸¦Ä¦á´´",
  "â“˜ðŸ…˜ï½‰ð¢ð–Žð’Šð“²ð•šðš’ð—‚ð—¶ð™žð˜ªâ’¤ðŸ‡®ðŸ„¸ðŸ…¸ó ©Ã­ï¾‰Ù±Î¹à¹€Ñ–áŒŽð”¦Ã¯ÉªÉ¨áµ¢â±Ä±â’¾ï¼©ðˆð•´ð‘°ð“˜ð•€ð™¸ð–¨ð—œð™„ð˜ó ‰Ð†â„‘Ð‡Æ—á´µÄ«Ã¬ÄªÏŠÃ®Ä­ÃŒÄ©ÎªÄ°á»‰Ñ—â…°Î¯",
  "â“™ðŸ…™ï½Šð£ð–ð’‹ð“³ð•›ðš“ð—ƒð—·ð™Ÿð˜«â’¥ðŸ‡¯ðŸ„¹ðŸ…¹ó ªï¾Œï»× ×ŸÑ˜áŒ‹ð”§á´ŠÉ‰â±¼Ê²É¾â’¿ï¼ªð‰ð•µð‘±ð“™ð•ð™¹ð–©ð—ð™…ð˜‘ó ŠÐˆð”Éˆá´¶",
  "â“šðŸ…šï½‹ð¤ð–ð’Œð“´ð•œðš”ð—„ð—¸ð™ ð˜¬â’¦ðŸ‡°ðŸ„ºðŸ…ºó «á¸±ã‚ºá›•ÐºáŒ•ð”¨á¸³á´‹êâ‚–áµÊžâ“€ï¼«ðŠð•¶ð‘²ð“šð•‚ð™ºð–ªð—žð™†ð˜’ó ‹á¸°ÐŒð”Žá¸²ê€á´·",
  "â“›ðŸ…›ï½Œð¥ð–‘ð’ð“µð•ðš•ð—…ð—¹ð™¡ð˜­â’§ðŸ‡±ðŸ„»ðŸ…»ó ¬Äºï¾šÉ­â„“áˆ¨ð”©á¸·ÊŸÅ‚â‚—Ë¡×Ÿâ“ï¼¬ð‹ð•·ð‘³ð“›ð•ƒð™»ð–«ð—Ÿð™‡ð˜“ó ŒÄ¹ð”á¸¶Åá´¸â…ƒ",
  "â“œðŸ…œï½ð¦ð–’ð’Žð“¶ð•žðš–ð—†ð—ºð™¢ð˜®â’¨ðŸ‡²ðŸ„¼ðŸ…¼ó ­á¸¿ï¾¶à¹“Ð¼áŒ ð”ªá¹á´â‚˜áµÉ¯â“‚ï¼­ðŒð•¸ð‘´ð“œð•„ð™¼ð–¬ð— ð™ˆð˜”ó á¸¾Ðœð”á¹€á´¹",
  "â“ðŸ…ï½Žð§ð–“ð’ð“·ð•Ÿðš—ð—‡ð—»ð™£ð˜¯â’©ðŸ‡³ðŸ„½ðŸ…½ó ®Å„åˆ€à¸Î·à¸ Ð¸áŠ­ð”«á¹…É´â‚™â¿á´Žâ“ƒï¼®ðð•¹ð‘µð“â„•ð™½ð–­ð—¡ð™‰ð˜•ó ŽÅƒÐ˜ð”‘á¹„á´º",
  "â“žðŸ…žï½ð¨ð–”ð’ð“¸ð• ðš˜ð—ˆð—¼ð™¤ð˜°â’ªðŸ‡´ðŸ„¾ðŸ…¾ó ¯Å‘Ñ»Ïƒà¹Ð¾á‹ð”¬Ã¶á´Ã¸â‚’áµ’â“„ï¼¯ðŽð•ºð‘¶ð“žð•†ð™¾ð–®ð—¢ð™Šð˜–ó ÅÐ¤ð”’Ã–Ã˜á´¼ÅŒÅÅØ©Ã•ÃµÃ’Ä“ÅŽÃ²Ã³à«…ÏŒÐ±Ã”à¨ ",
  "â“ŸðŸ…Ÿï½ð©ð–•ð’‘ð“¹ð•¡ðš™ð—‰ð—½ð™¥ð˜±â’«ðŸ‡µðŸ„¿ðŸ…¿ó °á¹•ï½±Ï×§Ñ€á‹¨ð”­á¹—á´©áµ½â‚šáµ–â“…ï¼°ðð•»ð‘·ð“Ÿâ„™ð™¿ð–¯ð—£ð™‹ð˜—ó á¹”Ð ð”“á¹–â±£á´¾êŸ¼",
  "â“ ðŸ… ï½‘ðªð––ð’’ð“ºð•¢ðššð—Šð—¾ð™¦ð˜²â’¬ðŸ‡¶ðŸ…€ðŸ†€ó ±Û¹á»£á‹’ð”®ê—â“†ï¼±ðð•¼ð‘¸ð“ â„šðš€ð–°ð—¤ð™Œð˜˜ó ‘ð””ê–",
  "â“¡ðŸ…¡ï½’ð«ð–—ð’“ð“»ð•£ðš›ð—‹ð—¿ð™§ð˜³â’­ðŸ‡·ðŸ…ðŸ†ó ²Å•å°ºÉ¼ÑÐ³Ñ“á‹ªð”¯á¹›Ê€Éáµ£Ê³É¹á´™â“‡ï¼²ð‘ð•½ð‘¹ð“¡â„ðšð–±ð—¥ð™ð˜™ó ’Å”Ð¯â„œá¹šÉŒá´¿",
  "â“¢ðŸ…¢ï½“ð¬ð–˜ð’”ð“¼ð•¤ðšœð—Œð˜€ð™¨ð˜´â’®ðŸ‡¸ðŸ…‚ðŸ†‚ó ³Å›ä¸‚à¸£Ñ•áŠð”°á¹¡êœ±â‚›Ë¢ê™…â“ˆï¼³ð’ð•¾ð‘ºð“¢ð•Šðš‚ð–²ð—¦ð™Žð˜šó “Ð…ð”–á¹ ê™„",
  "â“£ðŸ…£ï½”ð­ð–™ð’•ð“½ð•¥ðšð—ð˜ð™©ð˜µâ’¯ðŸ‡¹ðŸ…ƒðŸ†ƒó ´ï½²Õ‡Ñ‚á•ð”±áº—á´›Å§â‚œáµ—Ê‡â“‰ï¼´ð“ð•¿ð‘»ð“£ð•‹ðšƒð–³ð—§ð™ð˜›ó ”Ð“ð”—á¹ªÅ¦áµ€",
  "â“¤ðŸ…¤ï½•ð®ð–šð’–ð“¾ð•¦ðšžð—Žð˜‚ð™ªð˜¶â’°ðŸ‡ºðŸ…„ðŸ†„ó µÃºàªªÏ…à¸¢Ñ†áˆð”²Ã¼á´œáµ¾áµ¤áµ˜â“Šï¼µð”ð–€ð‘¼ð“¤ð•Œðš„ð–´ð—¨ð™ð˜œó •Å°Ð¦ð”˜ÃœáµÅ«ÅªÏ‹Å¨Ã™ÃšÅ¬á»§Å­Ïá»¦Ã»",
  "â“¥ðŸ…¥ï½–ð¯ð–›ð’—ð“¿ð•§ðšŸð—ð˜ƒð™«ð˜·â’±ðŸ‡»ðŸ……ðŸ†…ó ¶âˆšÛ·Î½×©áˆ€ð”³á¹¿á´ áµ¥áµ›ÊŒâ“‹ï¼¶ð•ð‘½ð“¥ð•ðš…ð–µð—©ð™‘ð˜ó –á¹¾â±½ðŒ¡",
  "â“¦ðŸ…¦ï½—ð°ð–œð’˜ð”€ð•¨ðš ð—ð˜„ð™¬ð˜¸â’²ðŸ‡¼ðŸ…†ðŸ††ó ·áºƒà¸Ï‰à¸¬Ñˆáˆ ð”´áº…á´¡Ê·Êâ“Œï¼·ð–ð–‚ð‘¾ð“¦ð•Žðš†ð–¶ð—ªð™’ð˜žó —áº‚Ð©ð”šáº„áµ‚",
  "â“§ðŸ…§ï½˜ð±ð–ð’™ð”ð•©ðš¡ð—‘ð˜…ð™­ð˜¹â’³ðŸ‡½ðŸ…‡ðŸ†‡ó ¸ï¾’à¸‹Ï‡×Ñ…áˆ¸ð”µáºâ‚“Ë£â“ï¼¸ð—ð–ƒð‘¿ð“§ð•ðš‡ð–·ð—«ð™“ð˜Ÿó ˜Ð–ð”›áºŒ",
  "â“¨ðŸ…¨ï½™ð²ð–žð’šð”‚ð•ªðš¢ð—’ð˜†ð™®ð˜ºâ’´ðŸ‡¾ðŸ…ˆðŸ†ˆó ¹Ó³ï¾˜×¥ÑƒÐŽáˆƒð”¶Ã¿ÉÊ¸ÊŽâ“Žï¼¹ð˜ð–„ð’€ð“¨ð•ðšˆð–¸ð—¬ð™”ð˜ ó ™Ó²Ð§ð”œÅ¸ÉŽ",
  "â“©ðŸ…©ï½šð³ð–Ÿð’›ð”ƒð•«ðš£ð—“ð˜‡ð™¯ð˜»â’µðŸ‡¿ðŸ…‰ðŸ†‰ó ºÅºä¹™Õ¹áŒŠð”·Å¼á´¢Æ¶á¶»â“ï¼ºð™ð–…ð’ð“©â„¤ðš‰ð–¹ð—­ð™•ð˜¡ó šÅ¹â„¨Å»Æµ"
};
}  // namespace

std::string_view getFuzzyEquivalents(char ch) {
  static std::string_view empty;
  static_assert(STATIC_ARRAYSIZE(rawExpansions) == 26);
  if (ch >= 'a' && ch <= 'z') {
    return rawExpansions[ch - 'a'];
  }
  return empty;
}
}  // namespace z2kplus::backend::util::automaton
